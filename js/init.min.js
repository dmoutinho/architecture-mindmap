/*!
 * Start Bootstrap - Clean Blog v5.0.6 (https://startbootstrap.com/template-overviews/clean-blog)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-clean-blog/blob/master/LICENSE)
 */

function init(){window.goSamples&&goSamples();var e=go.GraphObject.make;myDiagram=e(go.Diagram,"myDiagramDiv",{"commandHandler.copiesTree":!0,"commandHandler.copiesParentKey":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0}),myDiagram.addDiagramListener("Modified",function(e){var t=document.getElementById("SaveButton");t&&(t.disabled=!myDiagram.isModified);var o=document.title.indexOf("*");myDiagram.isModified?o<0&&(document.title+="*"):0<=o&&(document.title=document.title.substr(0,o))}),myDiagram.nodeTemplate=e(go.Node,"Vertical",{selectionObjectName:"TEXT"},e(go.TextBlock,{name:"TEXT",minSize:new go.Size(30,15),editable:!0},new go.Binding("text","text").makeTwoWay(),new go.Binding("scale","scale").makeTwoWay(),new go.Binding("font","font").makeTwoWay()),e(go.Shape,"LineH",{stretch:go.GraphObject.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:go.Spot.LeftRightSides,toSpot:go.Spot.LeftRightSides},new go.Binding("stroke","brush"),new go.Binding("fromSpot","dir",function(e){return spotConverter(e,!0)}),new go.Binding("toSpot","dir",function(e){return spotConverter(e,!1)})),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),new go.Binding("locationSpot","dir",function(e){return spotConverter(e,!1)})),myDiagram.nodeTemplate.selectionAdornmentTemplate=e(go.Adornment,"Spot",e(go.Panel,"Auto",e(go.Shape,{fill:null,stroke:"dodgerblue",strokeWidth:3}),e(go.Placeholder,{margin:new go.Margin(4,4,0,4)})),e("Button",{alignment:go.Spot.Right,alignmentFocus:go.Spot.Left,click:addNodeAndLink},e(go.TextBlock,"+",{font:"bold 8pt sans-serif"}))),myDiagram.nodeTemplate.contextMenu=e("ContextMenu",e("ContextMenuButton",e(go.TextBlock,"Bigger"),{click:function(e,t){changeTextSize(t,1.1)}}),e("ContextMenuButton",e(go.TextBlock,"Smaller"),{click:function(e,t){changeTextSize(t,1/1.1)}}),e("ContextMenuButton",e(go.TextBlock,"Bold/Normal"),{click:function(e,t){toggleTextWeight(t)}}),e("ContextMenuButton",e(go.TextBlock,"Copy"),{click:function(e,t){e.diagram.commandHandler.copySelection()}}),e("ContextMenuButton",e(go.TextBlock,"Delete"),{click:function(e,t){e.diagram.commandHandler.deleteSelection()}}),e("ContextMenuButton",e(go.TextBlock,"Undo"),{click:function(e,t){e.diagram.commandHandler.undo()}}),e("ContextMenuButton",e(go.TextBlock,"Redo"),{click:function(e,t){e.diagram.commandHandler.redo()}}),e("ContextMenuButton",e(go.TextBlock,"Layout"),{click:function(e,t){var o=t.part;o.diagram.startTransaction("Subtree Layout"),layoutTree(o.adornedPart),o.diagram.commitTransaction("Subtree Layout")}})),myDiagram.linkTemplate=e(go.Link,{curve:go.Link.Bezier,fromShortLength:-2,toShortLength:-2,selectable:!1},e(go.Shape,{strokeWidth:3},new go.Binding("stroke","toNode",function(e){return e.data.brush?e.data.brush:"black"}).ofObject())),myDiagram.contextMenu=e("ContextMenu",e("ContextMenuButton",e(go.TextBlock,"Paste"),{click:function(e,t){e.diagram.commandHandler.pasteSelection(e.diagram.lastInput.documentPoint)}}),e("ContextMenuButton",e(go.TextBlock,"Undo"),{click:function(e,t){e.diagram.commandHandler.undo()}},new go.Binding("visible","",function(e){return e.diagram&&e.diagram.commandHandler.canUndo()}).ofObject()),e("ContextMenuButton",e(go.TextBlock,"Redo"),{click:function(e,t){e.diagram.commandHandler.redo()}},new go.Binding("visible","",function(e){return e.diagram&&e.diagram.commandHandler.canRedo()}).ofObject()),e("ContextMenuButton",e(go.TextBlock,"Save"),{click:function(e,t){save()}}),e("ContextMenuButton",e(go.TextBlock,"Load"),{click:function(e,t){load()}})),myDiagram.addDiagramListener("SelectionMoved",function(e){var o=myDiagram.findNodeForKey(0).location.x;myDiagram.selection.each(function(e){if(0===e.data.parent){var t=e.location.x;o<t&&"right"!==e.data.dir?updateNodeDirection(e,"right"):t<o&&"left"!==e.data.dir&&updateNodeDirection(e,"left"),layoutTree(e)}})}),load()}function spotConverter(e,t){return"left"===e?t?go.Spot.Left:go.Spot.Right:t?go.Spot.Right:go.Spot.Left}function changeTextSize(e,t){var o=e.part;o.diagram.startTransaction("Change Text Size"),o.adornedPart.findObject("TEXT").scale*=t,o.diagram.commitTransaction("Change Text Size")}function toggleTextWeight(e){var t=e.part;t.diagram.startTransaction("Change Text Weight");var o=t.adornedPart.findObject("TEXT"),n=o.font.indexOf("bold");o.font=n<0?"bold "+o.font:o.font.substr(n+5),t.diagram.commitTransaction("Change Text Weight")}function updateNodeDirection(e,t){myDiagram.model.setDataProperty(e.data,"dir",t);for(var o=e.findTreeChildrenNodes();o.next();)updateNodeDirection(o.value,t)}function addNodeAndLink(e,t){var o=t.part,n=o.diagram;n.startTransaction("Add Node");var a=o.adornedPart,i=a.data,d={text:"idea",brush:i.brush,dir:i.dir,parent:i.key};n.model.addNodeData(d),layoutTree(a),n.commitTransaction("Add Node");var r=n.findNodeForData(d);null!==r&&n.scrollToRect(r.actualBounds)}function layoutTree(e){0===e.data.key?layoutAll():layoutAngle(e.findTreeParts(),"left"===e.data.dir?180:0)}function layoutAngle(e,t){go.GraphObject.make(go.TreeLayout,{angle:t,arrangement:go.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(e)}function layoutAll(){var o=myDiagram.findNodeForKey(0);if(null!==o){myDiagram.startTransaction("Layout");var n=new go.Set,a=new go.Set;o.findLinksConnected().each(function(e){var t=e.toNode;"left"===t.data.dir?(a.add(o),a.add(e),a.addAll(t.findTreeParts())):(n.add(o),n.add(e),n.addAll(t.findTreeParts()))}),layoutAngle(n,0),layoutAngle(a,180),myDiagram.commitTransaction("Layout")}}function save(){document.getElementById("mySavedModel").value=myDiagram.model.toJson(),myDiagram.isModified=!1}function load(){myDiagram.model=go.Model.fromJson(document.getElementById("mySavedModel").value)}